// jiangli.c
// 奖励发现bug的玩家
// xuer

inherit F_CLEAN_UP;
#include <ansi.h>

int main(object me,string arg)
{
	string id,reason,present;
	object player,gold;
	int i;
	
	if( !arg || arg=="" || sscanf(arg, "%s for %s", id, reason)!=2)
		return notify_fail("指令格式：jiangli <玩家id> for <简要介绍bug>\n");

	player = find_player(id);
	if (!player) return notify_fail("没有这个人\n");
	if (wizardp(player)) return notify_fail("不能奖励巫师\n");
	i=random(4);
	switch (i)
	{
		case 0:
			player->add("combat_exp", 5000);
			present="武学经验 5000 点";
			break;
		case 1:
			player->add("daoxing", 5000);
			present="道行 五年";
			break;
		case 2:
			player->add("potential",500);
			present="潜能 500 点";
			break;
		case 3:
			gold = new("/obj/money/gold");
			gold->set_amount(10);
			gold->move(player);
			present="10 gold";
			break;
	}
	tell_object(player,HBRED""+me->query("name")+"奖励给你"+present+"！\n"NOR);
	write(HBRED"你奖励"+player->query("name")+present+"！\n"NOR);
	message("channel:chat",HIR"【监察精灵】公正法官(Faguan)："+"据说由于“"+reason+
		"”，"+me->query("name")+"奖励了玩家 "HIW+player->query("name")+
		HIR+present+"\n"NOR,users());
	
	log_file("static/jiangli",
		sprintf("%s(%s) 奖励 %s(%s) %s 因为 %s  on %s\n",
		me->name(1),
		geteuid(me),
		player->name(1),
		geteuid(player),
		present,
		reason,
		ctime(time()) ));
	return 1;
}

int help(object me)
{
	write(@HELP
指令格式 : jiangli <玩家id> for <简要介绍bug>

本命令给与发现小bug(程序错误--程序失误,且没造成巨大损失的)
的player以奖励.注意请慎用本命令,如果bug问题不明确,经请示讨
论再决定
例子	jiangli tryid for 发现tree错误
HELP	);
	return 1;
}
